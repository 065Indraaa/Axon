import{U as w,V as f}from"./vendor-web3-j6IQKmcA.js";import{g as d}from"./index-r2sUVEvf.js";import"./vendor-react-BjSQZ88S.js";import"./vendor-ui-BdqUqcFr.js";const T="cdp_getTokenDetails",R="cdp_getMintDetails",I="cdp_mintToken",j="POST",C={"Content-Type":"application/json","OnchainKit-Version":w},D="2.0",N=()=>{if(!f.rpcUrl&&!f.apiKey)throw new Error("API Key Unset: You can use the Coinbase Developer Platform RPC by providing an API key in `OnchainKitProvider` or by manually calling `setOnchainKitConfig`: https://portal.cdp.coinbase.com/products/onchainkit");return f.rpcUrl||`https://api.developer.coinbase.com/rpc/v1/${f.chain.name.replace(" ","-").toLowerCase()}/${f.apiKey}`};function $(e,t){return{id:1,jsonrpc:D,method:e,params:t}}async function u(e,t){try{const r=$(e,t),n=N();return await(await fetch(n,{body:JSON.stringify(r),headers:C,method:j})).json()}catch(r){throw console.log(`sendRequest: error sending request: ${r.message}`),r}}async function _e({mintAddress:e,tokenId:t,network:r="",quantity:n,takerAddress:o}){try{const i=await u(I,[{mintAddress:e,network:r,quantity:n,takerAddress:o,tokenId:t}]);return i.error?{code:`${i.error.code}`,error:"Error building mint transaction",message:i.error.message}:i.result}catch{return{code:"uncaught-nft",error:"Something went wrong",message:"Error building mint transaction"}}}const U="cdp_listSwapAssets",K="cdp_getSwapQuote",H="cdp_getSwapTrade";function G(e,t){return B(e)||k(e,t)||L(e,t)||M()}function M(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function L(e,t){if(e){if(typeof e=="string")return b(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}function b(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function k(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,i,a,c=[],s=!0,l=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(s=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(g){l=!0,o=g}finally{try{if(!s&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}function B(e){if(Array.isArray(e))return e}function q(e,t){const r=e.split("."),n=G(r,2),o=n[0],i=n[1],s=(i===void 0?"":i).padEnd(t,"0").slice(0,t);return(BigInt(o+s)*BigInt(10)**BigInt(t-s.length)).toString()}function V(e,t){return W(e)||Q(e,t)||F(e,t)||x()}function x(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F(e,t){if(e){if(typeof e=="string")return _(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_(e,t):void 0}}function _(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Q(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,i,a,c=[],s=!0,l=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(s=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(g){l=!0,o=g}finally{try{if(!s&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}function W(e){if(Array.isArray(e))return e}function J(e,t){if(e.includes(".")){const c=e.split("."),s=V(c,2),l=s[0],v=s[1].padEnd(t,"0");return l+v}const r=BigInt(e),n=BigInt(10)**BigInt(t),o=(r/n).toString(),a=(r%n).toString().padStart(t,"0").replace(/0+$/,"");return a?`${o}.${a}`:o}function Y(e,t=!0,r=18){let n;return t?n=J(e,r):n=q(e,r),n}function A(e){const t=e.from,r=e.to,n=e.amount,o=e.amountReference,i=e.isAmountInDecimals,a=e.fromAddress,c=o==="from"?t.decimals:r.decimals;return typeof n!="string"||n.trim()===""?{code:"INVALID_INPUT",error:"Invalid input: amount must be a non-empty string",message:""}:!Number.isInteger(c)||c<0?{code:"INVALID_INPUT",error:"Invalid input: decimals must be a non-negative integer",message:""}:/^(?:0|[1-9]\d*|\.\d+)(?:\.\d*)?$/.test(n)?{fromAddress:a,from:t.address||"ETH",to:r.address||"ETH",amount:i?n:Y(n,!1,c),amountReference:o||"from"}:{code:"INVALID_INPUT",error:"Invalid input: amount must be a non-negative number string",message:""}}function O(e,t){const r=e.data,n=e.gas,o=e.to,i=e.value;return{chainId:Number(t),data:r,gas:BigInt(n),to:o,value:BigInt(i)}}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P(Object(r),!0).forEach(function(n){z(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function z(e,t,r){return(t=X(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X(e){var t=Z(e,"string");return typeof t=="symbol"?t:t+""}function Z(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}async function Oe(e){var o;const r=A(m(m({},{amountReference:"from",isAmountInDecimals:!1}),e));if(r.error)return r;let n=r;if(e.useAggregator||(n=m({v2Enabled:!0},n)),e.maxSlippage){let i=e.maxSlippage;e.useAggregator&&(i=(Number(e.maxSlippage)*10).toString()),n=m({slippagePercentage:i},n)}try{const i=await u(H,[n]);if(i.error)return{code:d("swap",(o=i.error)==null?void 0:o.code),error:i.error.message,message:""};const a=i.result;return{approveTransaction:a.approveTx?O(a.approveTx,a.chainId):void 0,fee:a.fee,quote:a.quote,transaction:O(a.tx,a.chainId),warning:a.quote.warning}}catch{return{code:d("uncaught-swap"),error:"Something went wrong",message:""}}}const ee="cdp_hydrateCharge",re="cdp_createProductCharge",te="CHECKOUT_ERROR",ne="CHECKOUT_TOO_MANY_REQUESTS_ERROR",oe="CHECKOUT_INVALID_CHARGE_ERROR",ie="CHECKOUT_INVALID_PARAMETER_ERROR",ae="UNCAUGHT_CHECKOUT_ERROR";function y(e){return e?e===-32001?ne:e===-32601?oe:e===-32602?ie:te:ae}async function Pe({address:e,chargeId:t,productId:r}){var n;try{let o;if(t)o=await u(ee,[{sender:e,chargeId:t}]);else if(r)o=await u(re,[{sender:e,productId:r}]);else return{code:"AmBPTa01",error:"No chargeId or productId provided",message:y()};return o.error?{code:"AmBPTa02",error:o.error.message,message:y((n=o.error)==null?void 0:n.code)}:o.result}catch{return{code:"AmBPTa03",error:"Something went wrong",message:y()}}}async function Ee({contractAddress:e,takerAddress:t,tokenId:r}){try{const n=await u(R,[{contractAddress:e,takerAddress:t,tokenId:r}]);return n.error?{code:`${n.error.code}`,error:"Error fetching mint details",message:n.error.message}:n.result}catch{return{code:"uncaught-nft",error:"Something went wrong",message:"Error fetching mint details"}}}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E(Object(r),!0).forEach(function(n){ce(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ce(e,t,r){return(t=se(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function se(e){var t=ue(e,"string");return typeof t=="symbol"?t:t+""}function ue(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}async function he(e){var o;const r=A(p(p({},{amountReference:"from",isAmountInDecimals:!1}),e));if(r.error)return r;let n=r;if(e.useAggregator||(n=p({v2Enabled:!0},n)),e.maxSlippage){let i=e.maxSlippage;e.useAggregator&&(i=(Number(e.maxSlippage)*10).toString()),n=p({slippagePercentage:i},n)}try{const i=await u(K,[n]);return i.error?{code:d("quote",(o=i.error)==null?void 0:o.code),error:i.error.message,message:""}:i.result}catch{return{code:d("uncaught-quote"),error:"Something went wrong",message:""}}}async function Se({contractAddress:e,tokenId:t}){try{const r=await u(T,[{contractAddress:e,tokenId:t}]);return r.error?{code:`${r.error.code}`,error:"Error fetching token details",message:r.error.message}:r.result}catch{return{code:"uncaught-nft",error:"Something went wrong",message:"Error fetching token details"}}}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h(Object(r),!0).forEach(function(n){le(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function le(e,t,r){return(t=fe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fe(e){var t=ge(e,"string");return typeof t=="symbol"?t:t+""}function ge(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}async function Ae(e){const r=S(S({},{limit:"50",page:"1"}),e);try{const n=await u(U,[r]);return n.error?{code:"AmGTa01",error:n.error.code.toString(),message:n.error.message}:n.result}catch(n){return{code:"AmGTa02",error:JSON.stringify(n),message:"Request failed"}}}export{_e as buildMintTransaction,Pe as buildPayTransaction,Oe as buildSwapTransaction,Ee as getMintDetails,he as getSwapQuote,Se as getTokenDetails,Ae as getTokens};
